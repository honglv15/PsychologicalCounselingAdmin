<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="per.dhl.mapper.CalendarInfoMapper">
    <insert id="AddEvents">
        insert into calendar_info(consult_id, calendar_time)
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="consultId != null">
                #{consultId,jdbcType=INTEGER},
            </if>
            <if test="calendarTime != null">
                #{calendarTime,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <update id="DelEvents">
        update calendar_info
        <set>
            calendar_state = 1
        </set>
        where consult_id = #{adminId} and calendar_time = #{eventTime}
    </update>
    <select id="initEvents" resultType="per.dhl.pojo.CalendarInfo">
        select *
        from calendar_info
        where calendar_state = 0;
    </select>
    <select id="checkIfEvent" resultType="per.dhl.pojo.CalendarInfo">
        select * from calendar_info
        where consult_id = #{consultId,jdbcType=INTEGER} and calendar_time = #{calendarTime,jdbcType=TIMESTAMP}
    </select>
    <select id="getConsultId" resultType="java.lang.Integer">
        select consult_id from consult_info where admin_id=#{accountID}
    </select>
</mapper>